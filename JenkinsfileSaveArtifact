pipeline {

    agent any

    stages {
    	stage('Build backend') {
            agent {
                docker { image 'maven:3.6.3-jdk-11-slim' }
            }
            steps {
                echo "Build backend with maven"
                sh 'mvn -B -DskipTests clean package'
                echo "ls"
               	sh "ls"
               	echo "ls target/"
               	sh "ls target/"
            }
        }
    }
    
    post {
        always {
            echo "Save Artifact"
            archiveArtifacts artifacts: 'target/mitocode-calculator.jar', onlyIfSuccessful: true
        }

        success {
            echo "success"
        }

        unstable {
            echo "unstable"
        }

        failure {
            echo "failure"
        }

        changed {
            echo "changed"
        }
    }
}

